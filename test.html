<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barcode Terkkos - Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .log { background: white; border-radius: 8px; padding: 15px; margin: 10px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .error { background: #fee; border-left: 4px solid #f00; }
        .success { background: #efe; border-left: 4px solid #0a0; }
        .warning { background: #ffc; border-left: 4px solid #fa0; }
    </style>
</head>
<body>
    <h1>ğŸ”§ Barcode Terkkos - DiagnÃ³stico del Sistema</h1>
    
    <div id="logs"></div>
    
    <script type="module">
        const logContainer = document.getElementById('logs');
        
        function addLog(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.innerHTML = `<strong>[${new Date().toLocaleTimeString()}]</strong> ${message}`;
            logContainer.appendChild(div);
            console.log(message);
        }
        
        async function testSystem() {
            try {
                addLog('ğŸš€ Iniciando diagnÃ³stico del sistema...', 'info');
                
                // Test 1: Cargar Utils
                addLog('ğŸ“ Cargando Utils...', 'info');
                const { Utils } = await import('./frontend/js/utils/utils.js');
                addLog('âœ… Utils cargado correctamente', 'success');
                
                // Test 2: Cargar DataService
                addLog('ğŸ“Š Cargando DataService...', 'info');
                const { DataService } = await import('./frontend/js/services/data-service.js');
                addLog('âœ… DataService cargado correctamente', 'success');
                
                // Test 3: Crear instancia de DataService
                addLog('ğŸ”§ Creando instancia de DataService...', 'info');
                const dataService = new DataService();
                addLog('âœ… Instancia de DataService creada', 'success');
                
                // Test 4: Verificar mÃ©todo init
                addLog('ğŸ” Verificando mÃ©todo init()...', 'info');
                if (typeof dataService.init === 'function') {
                    addLog('âœ… MÃ©todo init() encontrado', 'success');
                } else {
                    addLog('âŒ MÃ©todo init() NO encontrado', 'error');
                    return;
                }
                
                // Test 5: Ejecutar init
                addLog('âš¡ Ejecutando dataService.init()...', 'info');
                await dataService.init();
                addLog('âœ… DataService.init() ejecutado correctamente', 'success');
                
                // Test 6: Cargar ModalManager
                addLog('ğŸªŸ Cargando ModalManager...', 'info');
                const { ModalManager } = await import('./frontend/js/modules/modal-manager.js');
                const modalManager = new ModalManager(dataService);
                modalManager.init();
                addLog('âœ… ModalManager inicializado', 'success');
                
                // Test 7: Cargar todos los managers
                addLog('ğŸ“‹ Cargando PedidoManager...', 'info');
                const { PedidoManager } = await import('./frontend/js/modules/pedido-manager.js');
                addLog('âœ… PedidoManager cargado', 'success');
                
                addLog('ğŸ½ï¸ Cargando RondaManager...', 'info');
                const { RondaManager } = await import('./frontend/js/modules/ronda-manager.js');
                addLog('âœ… RondaManager cargado', 'success');
                
                addLog('ğŸ’³ Cargando PagoManager...', 'info');
                const { PagoManager } = await import('./frontend/js/modules/pago-manager.js');
                addLog('âœ… PagoManager cargado', 'success');
                
                addLog('ğŸª‘ Cargando MesaManager...', 'info');
                const { MesaManager } = await import('./frontend/js/modules/mesa-manager.js');
                addLog('âœ… MesaManager cargado', 'success');
                
                addLog('ğŸ‰ Â¡Todos los mÃ³dulos se cargaron correctamente!', 'success');
                addLog('âœ… El sistema estÃ¡ listo para funcionar', 'success');
                
            } catch (error) {
                addLog(`âŒ Error en el diagnÃ³stico: ${error.message}`, 'error');
                addLog(`ğŸ“š Stack trace: ${error.stack}`, 'error');
            }
        }
        
        // Ejecutar test
        testSystem();
    </script>
</body>
</html>